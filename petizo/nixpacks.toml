[phases.setup]
# ติดตั้ง Python และ Tesseract OCR สำหรับระบบ OCR
nixPkgs = ['python39', 'python39Packages.pip', 'tesseract']
aptPkgs = ['libgl1', 'libglib2.0-0', 'libsm6', 'libxext6', 'libxrender-dev', 'libgomp1', 'libgthread-2.0-0']

[phases.install]
# ติดตั้ง Node.js dependencies
cmds = ['npm install']

[phases.build]
# สร้าง database และติดตั้ง Python dependencies
cmds = [
  'npm run build',
  'pip3 install --upgrade pip --no-cache-dir',
  'pip3 install -r ocr_system/requirements.txt --no-cache-dir'
]

[start]
# เริ่ม server พร้อม environment variables สำหรับ OCR
cmd = 'chmod +x start.sh && ./start.sh'
